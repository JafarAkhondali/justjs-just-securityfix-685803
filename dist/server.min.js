/*! APR - v0.1.0 - (c) Alexis Puga Ru√≠z and contributors */
!function(){var APR,src_lib_isKeyValueObject,src_lib_hasOwn,src_lib_eachProperty,src_lib_defaults,src_lib_isWindow,hasOwn,isKeyValueObject,eachProperty;(APR={version:"0.2.0"}).isKeyValueObject=src_lib_isKeyValueObject=function(value){return/(^\{|\}$)/.test(JSON.stringify(value))},APR.hasOwn=src_lib_hasOwn=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},APR.eachProperty=(hasOwn=src_lib_hasOwn,src_lib_eachProperty=function(properties,fn,thisArg,strict){var k,returnedValues={};for(k in properties)(strict||hasOwn(properties,k))&&(returnedValues[k]=fn.call(thisArg,properties[k],k,properties));return returnedValues}),APR.defaults=(isKeyValueObject=src_lib_isKeyValueObject,eachProperty=src_lib_eachProperty,src_lib_defaults=function defaults(value,defaultValue,ignoreDefaultKeys){return Array.isArray(defaultValue)?Array.isArray(value)?value:defaultValue:isKeyValueObject(defaultValue)?isKeyValueObject(value)?(eachProperty(defaultValue,function(v,k){void 0!==value[k]?value[k]=defaults(value[k],v):ignoreDefaultKeys||(value[k]=v)}),value):defaultValue:typeof value==typeof defaultValue?value:defaultValue}),APR.access=function(defaults,isKeyValueObject){return function(object,path,handler,mutate){var lastKey,propertyExists=!0,baseObject=mutate?object:Object.assign({},object),currentObject=baseObject;return lastKey=(path=defaults(path,[path]))[path.length-1],path.slice(0,-1).map(function(key,i){if(null!==(currentObject=void 0!==currentObject[key]?currentObject[key]:(propertyExists=!1,{}))&&!isKeyValueObject(currentObject))throw new TypeError('The value of "'+key+'" is not a "key-value" object.')}),handler?handler.call(baseObject,currentObject,lastKey,propertyExists,path):currentObject[lastKey]}}(src_lib_defaults,src_lib_isKeyValueObject),APR.isWindow=src_lib_isWindow=function(isKeyValueObject){return function(object){return object===window||isKeyValueObject(object)&&object.document&&object.setInterval}}(src_lib_isKeyValueObject),APR.createPrivateKey=function(isKeyValueObject,isWindow){return function(factory,parent){var store=new WeakMap,seen=new WeakMap;return"function"!=typeof factory&&(isKeyValueObject(parent)&&parent.prototype&&(factory=Object.assign(Object.create(parent.prototype),factory)),factory=Object.create.bind(null,factory||Object.prototype,{})),function(key){var value;if(!(key instanceof Object))throw new TypeError(key+" must be an object.");return isWindow(key)&&(key=Window),(value=store.get(key))?value:seen.has(key)?key:(value=factory(key),store.set(key,value),seen.set(value,!0),value)}}}(src_lib_isKeyValueObject,src_lib_isWindow),APR.isEmptyObject=function(hasOwn){return function(object){var k,obj=Object(object);for(k in obj)if(hasOwn(obj,k))return!1;return!0}}(src_lib_hasOwn),APR.isJSONLikeObject=src_lib_isKeyValueObject,APR.parseUrl=function parseUrl(url){var optionalParts,hrefParts,id,uriParts,domainParts,hostParts,userParts,passwordParts,blob,parts={},location=Object.assign({},window.location);return url=url||location.href,/^blob\:/i.test(url)?(blob=parseUrl(url.replace(/^blob\:/i,"")),Object.assign(blob,{protocol:"blob:",href:"blob:"+blob.href,host:"",hostname:"",port:"",pathname:blob.origin+blob.pathname})):(/^(\:)?\/\//.test(url)?url="//"===(url=url.replace(/^\:/,""))?location.origin:location.protocol+url:/^(\?|\#|\/)/.test(url)?url=location.origin+url:/\:\/\//.test(url)||(url=location.protocol+"//"+url),id=(optionalParts=((hrefParts=url.split(/(\?.*#?|#.*\??).*/))[1]||"").split("#"))[1]||"",parts.search=optionalParts[0]||"",parts.hash=id?"#"+id:id,hostParts=((uriParts=(hrefParts[0]||"").split("://"))[1]||"").split(/(\/.*)/),parts.username="",parts.password="",/@/.test(hostParts[0])&&(passwordParts=(userParts=hostParts[0].split("@"))[0].split(":"),parts.username=passwordParts[0]||"",parts.password=passwordParts[1]||"",hostParts[0]=userParts[1]),parts.host=hostParts[0]||"",parts.pathname=hostParts[1]||"",domainParts=parts.host.split(/:[0-9]+/),parts.hostname=domainParts[0]||"",parts.port="number"==typeof domainParts[1]?domainParts[1]:"",parts.protocol=uriParts[0]+":",parts.origin=parts.protocol+"//"+parts.host,parts.href=(userParts?parts.protocol+"//"+parts.username+":"+parts.password+"@"+parts.host:parts.origin)+parts.pathname+parts.search+parts.hash,parts)},APR.stringToJSON=function(string){var json;if("string"!=typeof string)return{};try{json=JSON.parse(string)||{}}catch(exception){return{}}return json}}();